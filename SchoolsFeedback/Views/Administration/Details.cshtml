@model SchoolsFeedback.Models.Message

@{
    ViewBag.Title = "Детали";
}

<h2>Детали</h2>

<div>
	<hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.User.UserName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.User.UserName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Theme)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Theme)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Text)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Text)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Status)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.DateCreated)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.DateCreated)
        </dd>

    </dl>
</div>
<p>
    @Html.ActionLink("Обратно к запросам", "AllMessages")
    <div class="btn-group">
        <button type="button" class="btn btn-success" id="accept" @if (Model.Status == "Принято") { @Html.Raw("disabled"); }>Принять</button>
        <button type="button" class="btn btn-danger" id="reject" @if (Model.Status == "Отклонено") { @Html.Raw("disabled") ; }>Отклонить</button>
    </div>
</p>
@section scripts{
    <script>
        $(function () {
            $("#accept").click(function () {
                $.post("@Url.Action("ProccessRequest")", { status:"ok", id:@Model.ID});
            });
            $("#reject").click(function(){
                $.post("@Url.Action("ProccessRequest")", {status:"no", id:@Model.ID});
            });
        });
    </script>
    }
